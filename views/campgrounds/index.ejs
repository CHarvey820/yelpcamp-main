<% layout('layouts/boilerplate') %>

    <div id="cluster-map"></div>
    <div class="d-flex mt-3 justify-content-evenly">
        <h2>All Campgrounds</h2><a href="/campgrounds/new" class="btn btn-primary mb-3" role="button" aria-disabled="true">Add Campground</a>
    </div>
    <ul>
        <% for (let campground of campgrounds){ %>

            <div class="card mb-4">
                <div class="row">
                    <div class="col-md-4">
                        <% if(campground.images.length) {%>
                            <img crossorigin="anonymous" class="img-fluid" alt="" src="<%= campground.images[0].url %>">
                            <% } else { %>
                                <img crossorigin="anonymous" class="img-fluid" alt=""
                                    src="https://i.pinimg.com/originals/50/68/b6/5068b65db2640b7fd85dffbf42527a0b.png">
                                <% } %>
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title"><a href="/campgrounds/<%= campground._id %>"
                                    class="link-offset-2-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover">
                                    <%= campground.title %>
                                </a></h5>
                            <p class="card-text">
                                <%= campground.description %>
                            </p>
                            <p class="card-text">
                                <small class="text-muted">
                                    <%= campground.location %>
                                </small>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <% } %>
    </ul>

    <script>
        const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
        const campgrounds = { features: <%- JSON.stringify(campgrounds) %>};
    </script>

    <script src="/javascripts/clusterMap.js"></script>